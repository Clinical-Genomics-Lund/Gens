{% extends "layout.html" %}
{% from "navbar.html" import navbar %}

{% block title %}GENS - version {{version}}{% endblock title %}

{% block css_style %}
  {{ super() }}
{% endblock css_style %}

{% block scripts %}
  {{ super() }}
{% endblock scripts %}

{% block body %}
  {{ navbar() }}
  {{ super() }}
{% endblock %}

{% block content %}
<div class="content">
  <h1>Samples</h1>
  <p>Click on a sample to open it in Gens</p>
  {{ samples_table(samples) }}
</div>
{% endblock content %}

{% macro samples_table(samples_obj)%}
  <table>
    <thead>
      <tr>
        <td>Sample id</td>
        <td>Genome build</td>
        <td>Import date</td>
      </tr>
    </thead>
    <tbody>
      {% for sample in samples_obj %}
        {% set genome_build=sample["genome_build"]%}
        {% set sample_id=sample["sample_id"]%}
        <tr>
          <td><a href="{{ url_for('gens.display_case', sample_name=sample_id, genome_build=genome_build) }}" target="_blank">{{sample_id}}</a></td>
          <td>{{genome_build}}</td>
          <td>{{sample["created_at"].strftime("%Y-%m-%d")}}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endmacro %}
